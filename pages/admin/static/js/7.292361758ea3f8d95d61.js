webpackJsonp([7],{"3tWi":function(e,t){},Lx3o:function(e,t){},WXd7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),r=n("NYxO"),a=n("xAvK"),o={props:{name:{type:String,default:""},status:{type:String,default:"normal"},date:{type:String,default:(new Date).toLocaleString()}},data:function(){return{percent:5,timer:null,step:10}},watch:{status:function(e,t){"success"===e&&(this.percent=100),this.timer&&clearInterval(this.timer)}},created:function(){var e=this;this.timer||(this.timer=setInterval(function(){99!==e.percent&&e.percent+e.step>=100?(e.step=1,e.percent+=e.step):e.percent+e.step===100?clearInterval(e.timer):e.percent+=e.step},1e3))},beforeDestroy:function(){clearInterval(this.timer)}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"file-progress"},[t("span",[this._v(this._s(this.name+" 上传于 "+this.date))]),this._v(" "),t("Progress",{attrs:{percent:this.percent,"stroke-width":8,status:this.status}})],1)},staticRenderFns:[]};var c={components:{"file-progress":n("VU/8")(o,l,!1,function(e){n("3tWi")},null,null).exports},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{opening:""}},watch:{files:{handler:function(e,t){this.opening=e.length?"0":""},deep:!0}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Collapse",{staticClass:"file-upload-indicator",model:{value:e.opening,callback:function(t){e.opening=t},expression:"opening"}},[n("Panel",{attrs:{name:"0"}},[e._v("\n        上传文件\n    "),n("p",{attrs:{slot:"content"},slot:"content"},[e.files.length?n("ul",{staticClass:"file-list"},e._l(e.files,function(e,t){return n("li",{key:t},[n("file-progress",{attrs:{name:e.name,date:e.date,status:e.status}})],1)})):n("span",[e._v("暂未上传")])])])],1)},staticRenderFns:[]};var p={components:{"file-upload-indicator":n("VU/8")(c,d,!1,function(e){n("Lx3o")},null,null).exports},data:function(){return{csvFileMaxSize:a.CSVFILEMAXSIZE,zipFileMaxSize:a.ZIPFILEMAXSIZE,form:{info:[],imgs:[]},infoAction:this.composeActionUrl("/productfile/"),importImg:!1}},computed:i()({},Object(r.b)({files:"uploadingFiles"})),methods:{composeActionUrl:function(e){return a.PRODURL+e},handleCSVFormatError:function(e){this.$Notice.warning({title:"文件格式错误",desc:e.name+" 格式错误, 请选择.csv文件."})},handleCSVMaxSize:function(e){var t=this.csvFileMaxSize<1024?"KB":"M";this.$Notice.warning({title:"文件过大",desc:e.name+" 大小不能超过"+(this.csvFileMaxSize/1024||this.csvFileMaxSize)+t})},handleCSVSuccess:function(e,t){this.$store.commit("updateUploadingStatus",{name:t.name,status:"success"}),this.$Message.success({content:"商品信息批量导入成功"})},handleCSVProgress:function(e,t){this.$store.commit("pushNewUploadingFile",{name:t.name,date:(new Date).toLocaleString()})},handleCSVError:function(e,t,n){this.$store.commit("updateUploadingStatus",{name:n.name,status:"wrong"}),this.$Message.error({content:"商品信息批量导入失败"})},handleZIPFormatError:function(e){this.$Notice.warning({title:"文件格式错误",desc:e.name+" 格式错误, 请选择.zip文件."})},handleZIPMaxSize:function(e){var t=this.csvFileMaxSize<1024?"KB":"M";this.$Notice.warning({title:"文件过大",desc:e.name+" 大小不能超过"+(this.zipFileMaxSize/1024||this.zipFileMaxSize)+t})},handleZIPSuccess:function(e,t){},handleZIPProgress:function(e,t){},handleZIPError:function(e,t,n){}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"batch-import-goods"}},[n("Form",{attrs:{model:e.form,"label-width":150}},[n("section",[n("header",[e._v("商品信息导入")]),e._v(" "),n("div",{staticClass:"section-body"},[n("FormItem",{attrs:{label:"商品信息",prop:"info"}},[n("Row",[n("Col",{attrs:{xs:24,md:16,lg:12}},[n("Upload",{ref:"uploadCSV",attrs:{type:"drag",name:"OriFile",multiple:"",accept:".csv",format:["csv"],action:e.infoAction,"show-upload-list":!1,"max-size":e.csvFileMaxSize,"on-format-error":e.handleCSVFormatError,"on-exceeded-size":e.handleCSVMaxSize,"on-success":e.handleCSVSuccess,"on-error":e.handleCSVError,"on-progress":e.handleCSVProgress}},[n("div",{staticStyle:{padding:"20px 0"}},[n("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),e._v(" "),n("p",[e._v("点击或拖曳文件到这里上传")])],1)])],1)],1)],1)],1)]),e._v(" "),e.importImg?n("section",[n("header",[e._v("商品图片导入")]),e._v(" "),n("div",{staticClass:"section-body"},[n("FormItem",{attrs:{label:"商品图片",prop:"imgs"}},[n("Row",[n("Col",{attrs:{xs:24,md:16,lg:12}},[n("Upload",{ref:"uploadZIP",attrs:{type:"drag",action:e.imgsAction,"show-upload-list":!1,accept:".zip",format:["zip"],"max-size":e.zipFileMaxSize,"on-format-error":e.handleZIPFormatError,"on-exceeded-size":e.handleZIPMaxSize,"on-success":e.handleZIPSuccess,"on-error":e.handleZIPError,"on-progress":e.handleZIPProgress}},[n("div",{staticStyle:{padding:"20px 0"}},[n("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),e._v(" "),n("p",[e._v("点击或拖曳文件到这里上传")])],1)])],1)],1)],1)],1)]):e._e()]),e._v(" "),n("file-upload-indicator",{attrs:{files:e.files}})],1)},staticRenderFns:[]};var f=n("VU/8")(p,u,!1,function(e){n("dDp6")},null,null);t.default=f.exports},dDp6:function(e,t){}});