webpackJsonp([5],{"9Ifc":function(e,t){},NK9E:function(e,t){},"Vq/x":function(e,t){},WXd7:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("Dd8w"),i=s.n(n),a=s("NYxO"),r=s("xAvK"),o={props:{name:{type:String,default:""},status:{type:String,default:"normal"},date:{type:String,default:(new Date).toLocaleString()}},data:function(){return{percent:5,timer:null,step:10}},watch:{status:function(e,t){"success"===e&&(this.percent=100),this.timer&&clearInterval(this.timer)}},created:function(){var e=this;this.timer||(this.timer=setInterval(function(){99!==e.percent&&e.percent+e.step>=100?(e.step=1,e.percent+=e.step):e.percent+e.step===100?clearInterval(e.timer):e.percent+=e.step},1e3))},beforeDestroy:function(){clearInterval(this.timer)}},l={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"file-progress"},[t("span",[this._v(this._s(this.name+" 上传于 "+this.date))]),this._v(" "),t("Progress",{attrs:{percent:this.percent,"stroke-width":8,status:this.status}})],1)},staticRenderFns:[]};var c={components:{"file-progress":s("VU/8")(o,l,!1,function(e){s("Vq/x")},null,null).exports},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{opening:""}},watch:{files:{handler:function(e,t){this.opening=e.length?"0":""},deep:!0}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Collapse",{staticClass:"file-upload-indicator",model:{value:e.opening,callback:function(t){e.opening=t},expression:"opening"}},[s("Panel",{attrs:{name:"0"}},[e._v("\n        上传文件\n    "),s("p",{attrs:{slot:"content"},slot:"content"},[e.files.length?s("ul",{staticClass:"file-list"},e._l(e.files,function(e,t){return s("li",{key:t},[s("file-progress",{attrs:{name:e.name,date:e.date,status:e.status}})],1)})):s("span",[e._v("暂未上传")])])])],1)},staticRenderFns:[]};var p={components:{"file-upload-indicator":s("VU/8")(c,d,!1,function(e){s("9Ifc")},null,null).exports},data:function(){return{csvFileMaxSize:r.CSVFILEMAXSIZE,zipFileMaxSize:r.ZIPFILEMAXSIZE,formGoods:{info:[],imgs:[]},infoAction:"/infoAction",imgsAction:"/imgsAction",importImg:!1}},computed:i()({},Object(a.b)({files:"uploadingFiles"})),methods:{handleCSVFormatError:function(e){this.$Notice.warning({title:"文件格式错误",desc:e.name+" 格式错误, 请选择.csv文件."})},handleCSVMaxSize:function(e){var t=this.csvFileMaxSize<1024?"KB":"M";this.$Notice.warning({title:"文件过大",desc:e.name+" 大小不能超过"+(this.csvFileMaxSize/1024||this.csvFileMaxSize)+t})},handleCSVSuccess:function(e,t){this.$store.commit("updateUploadingStatus",{name:t.name,status:"success"}),this.$Message.success("商品信息批量导入成功")},handleCSVProgress:function(e,t){this.$store.commit("pushNewUploadingFile",{name:t.name,date:(new Date).toLocaleString()})},handleCSVError:function(e,t,s){this.$store.commit("updateUploadingStatus",{name:s.name,status:"wrong"}),this.$Message.error("商品信息批量导入失败")},handleZIPFormatError:function(e){this.$Notice.warning({title:"文件格式错误",desc:e.name+" 格式错误, 请选择.zip文件."})},handleZIPMaxSize:function(e){var t=this.csvFileMaxSize<1024?"KB":"M";this.$Notice.warning({title:"文件过大",desc:e.name+" 大小不能超过"+(this.zipFileMaxSize/1024||this.zipFileMaxSize)+t})},handleZIPSuccess:function(e,t){},handleZIPProgress:function(e,t){},handleZIPError:function(e,t,s){}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"batch-import-goods"}},[s("Form",{attrs:{model:e.formGoods,"label-width":150}},[s("section",[s("header",[e._v("商品信息导入")]),e._v(" "),s("div",{staticClass:"section-body"},[s("FormItem",{attrs:{label:"商品信息",prop:"info"}},[s("Row",[s("Col",{attrs:{xs:24,md:16,lg:12}},[s("Upload",{ref:"uploadCSV",attrs:{type:"drag",multiple:"",accept:".csv",format:["csv"],action:e.infoAction,"show-upload-list":!1,"max-size":e.csvFileMaxSize,"on-format-error":e.handleCSVFormatError,"on-exceeded-size":e.handleCSVMaxSize,"on-success":e.handleCSVSuccess,"on-error":e.handleCSVError,"on-progress":e.handleCSVProgress}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),e._v(" "),s("p",[e._v("点击或拖曳文件到这里上传")])],1)])],1)],1)],1)],1)]),e._v(" "),e.importImg?s("section",[s("header",[e._v("商品图片导入")]),e._v(" "),s("div",{staticClass:"section-body"},[s("FormItem",{attrs:{label:"商品图片",prop:"imgs"}},[s("Row",[s("Col",{attrs:{xs:24,md:16,lg:12}},[s("Upload",{ref:"uploadZIP",attrs:{type:"drag",action:e.imgsAction,"show-upload-list":!1,accept:".zip",format:["zip"],"max-size":e.zipFileMaxSize,"on-format-error":e.handleZIPFormatError,"on-exceeded-size":e.handleZIPMaxSize,"on-success":e.handleZIPSuccess,"on-error":e.handleZIPError,"on-progress":e.handleZIPProgress}},[s("div",{staticStyle:{padding:"20px 0"}},[s("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),e._v(" "),s("p",[e._v("点击或拖曳文件到这里上传")])],1)])],1)],1)],1)],1)]):e._e()]),e._v(" "),s("file-upload-indicator",{attrs:{files:e.files}})],1)},staticRenderFns:[]};var f=s("VU/8")(p,u,!1,function(e){s("NK9E")},null,null);t.default=f.exports}});
//# sourceMappingURL=5.ce6dbb3b5502e7c8bd94.js.map